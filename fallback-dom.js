import{querySel as t}from"./query-selector.js";var e,r,n,s,l,o;const i=Symbol("definedTag"),u=Symbol("customElements"),a=Symbol("document"),c=Symbol("tagName"),h=Symbol("reg"),p=Symbol("con"),d=Symbol("when");class g{constructor(){this[e]=new Map,this[r]=new Map,this[n]=new Map}define(t,e){const r=this[h];if(r.has(t))throw Error("element "+JSON.stringify(t)+" has already been defined");const n=e.prototype;let s=n;for(;s&&s!==q.prototype;)s=Object.getPrototypeOf(s);if(!s)throw Error("the constructor of element "+JSON.stringify(t)+" is not a decendant of the right kind of Element class");const l=this[p];if(q==e||l.has(e))throw Error("the prototype of element "+JSON.stringify(t)+" must be unique");r.set(t,e),l.set(e,t),n[c]=t;const o=this[d].get(t);if(o){this[d].delete(t);for(const t of o)t(e)}}upgrade(t){const e=this[h],r=t.tagName,n=e.get(r);if(!n)return;const s=Object.getPrototypeOf(t);if(s===q.prototype)try{Object.setPrototypeOf(t,n.prototype),n.call(t)}catch(e){throw Object.setPrototypeOf(t,s),e}}whenDefined(t){const e=this[h].get(t);if(e)return Promise.resolve(e);let r=this[d].get(t);r||(r=[],this[d].set(t,r));const n=r;return new Promise((t=>n.push(t)))}get(t){return this[h].get(t)}[(e=h,r=p,n=d,i)](t){return this[p].get(t)}}const f=Symbol("parent"),m=Symbol("previousSibling"),b=Symbol("nextSibling");class y{constructor(){if(this[s]=null,this[l]=null,this[o]=null,void 0===this[a])throw Error("a node must be created by a document")}get parentNode(){return this[f]}get previousSibling(){return this[m]}get nextSibling(){return this[b]}get ownerDocument(){return this[a]}unsafeSetParent(t){this[f]=t}unsafeReplaceParent(t){const e=this[f];e&&e.removeChild(this),this[f]=t}unsafeSetPrev(t){this[m]=t,t&&(t[b]=this)}unsafeSetNext(t){this[b]=t,t&&(t[m]=this)}}s=f,l=m,o=b;const w=Symbol("childNodes"),v=Symbol("children");class S extends y{constructor(){super()}get textContent(){const t=this[w];return t?t.reduce(((t,e)=>{const r=e.nodeType;return 1==r||3==r||4==r?t+e.textContent:t}),""):""}set textContent(t){t=t.toString();const e=this[w]=[];this[v]=[],t&&e.push(this.ownerDocument.createTextNode(t))}hasChildNodes(){const t=this[w];return!!t&&0!=t.length}get childNodes(){const t=this[w];return t?t.slice():[]}get childElementCount(){const t=this[v];return t?t.length:0}get children(){const t=this[v];return t?t.slice():[]}get firstElementChild(){return this[v]?.[0]||null}get lastElementChild(){const t=this[v];if(!t)return null;const e=t?t.length:0;return e?t[e-1]:null}get firstChild(){return this[w]?.[0]||null}get lastChild(){const t=this[w];if(!t)return null;const e=t.length;return e?t[e-1]:null}append(...t){for(const e of t){const t="string"==typeof e?this.ownerDocument.createTextNode(e):"object"==typeof e&&e instanceof y?e:void 0;if(void 0===t)throw new TypeError("unsupported input type");this.insertBefore(t,null)}}prepend(...t){let e=this[w];e||(e=[],this[w]=e);const r=e[0]||null;for(const e of t){const t="string"==typeof e?this.ownerDocument.createTextNode(e):"object"==typeof e&&e instanceof y?e:void 0;if(void 0===t)throw new TypeError("unsupported input type");this.insertBefore(t,r)}}querySelector(e){return t(this,e).next().value||null}querySelectorAll(e){return Array.from(t(this,e))}replaceChildren(...t){let e=this[w];if(e){if(e.length){let t=this[v];t?t.length=0:(t=[],this[v]=t);const r=e.slice();e.length=0;for(const t of r)t.unsafeSetParent(null),t.unsafeSetPrev(null),t.unsafeSetNext(null)}}else e=[],this[w]=e;t.length&&this.append(...t)}insertBefore(t,e){if(t.ownerDocument!=this.ownerDocument){if(9!=this.nodeType)throw Error("owner document mismatch");if(t.ownerDocument!=this){if(10!=t.nodeType||null!=t.ownerDocument)throw Error("owner document mismatch while inserting to the root");t[a]=this}}if(t.parentNode==this){if(e==t||e==t.nextSibling)return t;this.removeChild(t)}let r=this[w];r||(r=[],this[w]=r);let n=this[v];n||(n=[],this[v]=n);let s=r.length,l=n.length;if(e){if(s=r.indexOf(e),-1==s)throw Error("child does not exist");l=0;for(let t=s;t>=0;t--)if(1==r[t].nodeType){l=n.indexOf(r[t]);break}}if(t instanceof P){const e=t[w]?.slice();if(e&&e.length){for(const t of e)t.unsafeSetParent(this),1==t.nodeType&&n.splice(l++,0,t);e[0].unsafeSetPrev(r[s-1]||null),e[e.length-1].unsafeSetNext(r[s]||null),r.splice(s,0,...e),t[w].length=0,t[v]=[]}}else t.unsafeReplaceParent(this),t.unsafeSetPrev(r[s-1]||null),t.unsafeSetNext(r[s]||null),r.splice(s,0,t),1==t.nodeType&&n.splice(l++,0,t);return t}appendChild(t){return this.insertBefore(t,null)}removeChild(t){{const e=this[w],r=e?e.indexOf(t):-1;if(!e||-1==r)return t;if(e.splice(r,1),1!=t.nodeType)return t}{const e=this[v],r=e?e.indexOf(t):-1;return e&&-1!=r&&e.splice(r,1),t}}getElementsByClassName(t){return this.querySelectorAll("."+t)}getElementsByTagName(t){return this.querySelectorAll(t)}}const x=Symbol("textContent");class C extends y{constructor(t){super(),this[x]=t.toString()}get data(){return this[x]}set data(t){this[x]=t.toString()}get length(){return this[x].length}appendData(t){this[x]+=t.toString()}}class E extends C{get nodeType(){return 3}get textContent(){return this[x]}set textContent(t){this[x]=t.toString()}constructor(t){super(t)}}class N extends C{get nodeType(){return 4}get textContent(){return this[x]}set textContent(t){this[x]=t.toString()}constructor(t){super(t)}}const O=Symbol("target");class T extends C{constructor(t,e){super(e),this[O]=t}get nodeType(){return 7}get target(){return this[O]}get textContent(){return this[x]}set textContent(t){this[x]=t.toString()}}class j extends C{get nodeType(){return 8}get textContent(){return this[x]}set textContent(t){this[x]=t.toString()}constructor(t){super(t)}}class P extends S{get nodeType(){return 11}constructor(){super()}}class D extends y{get specified(){return!0}get prefix(){const t=this.name.match(/^([^:]+):/);return t?t[1]:null}get localName(){return this.name.replace(/^[^:]+:/,"")}}const A=Symbol("attributes");class q extends S{constructor(){if(super(),!this[c])throw Error("unexpected element without known tag name")}get nodeType(){return 1}get tagName(){return this[c]}get localName(){return this[c].replace(/^[^:]*:/,"")}get id(){return this.getAttribute("id")||""}set id(t){this.setAttribute("id",t)}get attributes(){const t=[],e=this[A];if(!e)return t;for(const[r,n]of e){const e=Object.create(D.prototype,{[a]:{value:this.ownerDocument,writable:!0},ownerElement:{value:this,writable:!0},name:{value:r,writable:!1},value:{value:n,writable:!0}});t.push(e)}return t}getAttribute(t){const e=this[A],r=e?e.get(t):null;return void 0===r?null:r}setAttribute(t,e){let r=this[A];r||(r=new Map,this[A]=r),r.set(t,e)}remove(){const t=this.parentNode;t&&t.removeChild(this)}}const B=Symbol("element");function I(t){var e,r;return t[B]=(r=class extends q{constructor(){super(),this[e]=t}},e=a,r),Object.defineProperties(t[B].prototype,{[a]:{value:t,writable:!0},[f]:{value:null,writable:!0},[m]:{value:null,writable:!0},[b]:{value:null,writable:!0}}),t}class M extends S{constructor(){super()}get Element(){return this[B]}get customElements(){let t=this[u];return t||(this[u]=t=new g),t}get nodeType(){return 9}get documentElement(){return this.firstElementChild}createElement(t){const e=this[u]?.get(t);return e?new e:Object.create(this[B].prototype,{[c]:{value:t,writable:!1}})}createTextNode(t){return Object.create(E.prototype,{[a]:{value:this,writable:!0},[f]:{value:null,writable:!0},[m]:{value:null,writable:!0},[b]:{value:null,writable:!0},[x]:{value:t.toString(),writable:!0}})}createComment(t){return Object.create(j.prototype,{[a]:{value:this,writable:!0},[f]:{value:null,writable:!0},[m]:{value:null,writable:!0},[b]:{value:null,writable:!0},[x]:{value:t.toString(),writable:!0}})}createCDATASection(t){return Object.create(N.prototype,{[a]:{value:this,writable:!0},[f]:{value:null,writable:!0},[m]:{value:null,writable:!0},[b]:{value:null,writable:!0},[x]:{value:t.toString(),writable:!0}})}createProcessingInstruction(t,e){return Object.create(T.prototype,{[a]:{value:this,writable:!0},[f]:{value:null,writable:!0},[m]:{value:null,writable:!0},[b]:{value:null,writable:!0},[O]:{value:t.toString(),writable:!0},[x]:{value:e.toString(),writable:!0}})}createDocumentFragment(){return Object.create(P.prototype,{[a]:{value:this,writable:!0},[f]:{value:null,writable:!1},[m]:{value:null,writable:!1},[b]:{value:null,writable:!1}})}getElementById(t){return this.querySelector("#"+t)}}function k(){return I(Object.create(class extends M{constructor(){super()}}.prototype,{[a]:{value:null}}))}function J(t=""){const e=Object.create(class extends M{get body(){for(const t of this.documentElement.children)if("body"==t.localName)return t;return null}get head(){for(const t of this.documentElement.children)if("head"==t.localName)return t;return null}constructor(){super()}}.prototype);e[a]=null,I(e),Object.defineProperty(e.Element.prototype,"className",{get(){return this.getAttribute("class")||""},set(t){this.setAttribute("class",t.trim())}});{e.appendChild(F("html"));const r=e.createElement("html");r.appendChild(e.createElement("head")).appendChild(e.createElement("title")).textContent=t,r.appendChild(e.createElement("body")),e.appendChild(r)}return e}class R extends y{constructor(){throw super(),Error("Constructor should never be called")}get nodeType(){return 10}get internalSubset(){return null}set textContent(t){}get textContent(){return null}}function F(t,e="",r=""){return Object.create(R.prototype,{[a]:{value:null,writable:!0},name:{value:t,writable:!1},publicId:{value:e,writable:!1},systemId:{value:r,writable:!1}})}export{N as CDATASection,C as CharacterData,j as Comment,M as Document,P as DocumentFragment,R as DocumentType,q as Element,y as Node,T as ProcessingInstruction,E as Text,k as createDocument,F as createDocumentType,J as createHTMLDocument};
//# sourceMappingURL=fallback-dom.js.map
